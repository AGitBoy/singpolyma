(function(Uzbl){var show = function(u){Uzbl.run('set status_message = <span foreground="green">&lt;'+u.replace('&','&amp;')+'&gt;</span>');Uzbl.run('sh -c \'echo "'+u+'"\\\\c | xclip\'');Uzbl.run('sh -c \'echo "'+u+'"\\\\c | xclip -selection clipboard\'');};var url=document.location;var links=document.getElementsByTagName('link');var found=0;for(var i=0,l;l=links[i];i++){if(l.getAttribute('rev')=='canonical'||(/alternate short/).exec(l.getAttribute('rel'))){found=l.getAttribute('href');break;}}if(found){show(found);}else{window.onTinyUrlGot=function(r){if(r.errorCode==0){var t;for(var i in r.results){t=r.results[i].shortUrl;}show(t);}else{alert('Could not shorten with bit.ly');}};var s=document.createElement('script');s.type='text/javascript';s.src='http://api.bit.ly/shorten?login=bitlyapidemo&apiKey=R_0da49e0a9118ff35f52f629d2d71bf07&version=2.0.1&callback=onTinyUrlGot&longUrl='+encodeURIComponent(document.location);document.getElementsByTagName('head')[0].appendChild(s);}})(Uzbl);
